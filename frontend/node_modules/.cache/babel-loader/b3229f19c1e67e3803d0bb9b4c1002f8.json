{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/chris/Desktop/freewrite/frontend/src/components/Page.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport firebase from \"firebase\";\nimport { Button } from \"react-bootstrap\"; // import { debounce } from \"debounce\";\n\nimport AwesomeDebouncePromise from 'awesome-debounce-promise';\n\nconst Page = ({\n  location\n}) => {\n  _s();\n\n  const [data, setDate] = useState(\"\");\n  const firebaseConfig = {\n    apiKey: \"AIzaSyCL3z399TlGU0Sfiw7khQT7ywCValJIDDM\",\n    authDomain: \"freewrite-40098.firebaseapp.com\",\n    databaseURL: \"https://freewrite-40098.firebaseio.com\",\n    projectId: \"freewrite-40098\",\n    storageBucket: \"freewrite-40098.appspot.com\",\n    messagingSenderId: \"228525122017\",\n    appId: \"1:228525122017:web:36026015fcba76da6232a0\",\n    measurementId: \"G-VYG3XJZB2F\"\n  };\n\n  if (!firebase.apps.length) {\n    firebase.initializeApp(firebaseConfig);\n  }\n\n  const firestore = firebase.firestore();\n  const collRef = firestore.collection(\"pages\");\n\n  const clickHandler = () => {\n    let vals = document.querySelector(\"textarea\").value;\n    let loc = location.pathname.slice(1);\n    collRef.doc(loc).set({\n      pageContent: vals\n    }).then(() => {\n      console.log(\"Data submitted!\");\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n\n  function debounce(func, wait, immediate) {\n    var timeout;\n    return function () {\n      var context = this,\n          args = arguments;\n\n      var later = function () {\n        timeout = null;\n        if (!immediate) func.apply(context, args);\n      };\n\n      var callNow = immediate && !timeout;\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n      if (callNow) func.apply(context, args);\n    };\n  }\n\n  ;\n\n  const debouncer = async () => {\n    await debounce(clickHandler, 1000);\n  };\n\n  const onFieldChange = async () => {\n    await debouncer();\n  };\n\n  useEffect(async () => {\n    let loc = location.pathname.slice(1);\n    console.log(\"loc\", loc);\n    console.log(collRef.doc(loc));\n\n    try {\n      const collection = collRef.doc(loc);\n      const firestoreData = await collection.get();\n      document.querySelector(\"textarea\").value = firestoreData.data().pageContent;\n    } catch (err) {\n      throw new Error(err);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"pt-4\",\n      children: [\"Welcome to \", location.pathname, \"!\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mb-3\",\n      children: \"Your notes will automatically save as your type\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      onChange: onFieldChange,\n      className: \"border\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Page, \"RgWMmsE89Xs9lRK/oYeaaAuW+Yo=\");\n\n_c = Page;\nexport default Page;\n\nvar _c;\n\n$RefreshReg$(_c, \"Page\");","map":{"version":3,"sources":["/Users/chris/Desktop/freewrite/frontend/src/components/Page.js"],"names":["React","useEffect","useState","useCallback","firebase","Button","AwesomeDebouncePromise","Page","location","data","setDate","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","apps","length","initializeApp","firestore","collRef","collection","clickHandler","vals","document","querySelector","value","loc","pathname","slice","doc","set","pageContent","then","console","log","catch","e","debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","debouncer","onFieldChange","firestoreData","get","err","Error"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport firebase from \"firebase\";\nimport { Button } from \"react-bootstrap\";\n// import { debounce } from \"debounce\";\nimport AwesomeDebouncePromise from 'awesome-debounce-promise';\n\nconst Page = ({ location }) => {\n    const [ data, setDate ] = useState(\"\");\n\n    const firebaseConfig = {\n        apiKey: \"AIzaSyCL3z399TlGU0Sfiw7khQT7ywCValJIDDM\",\n        authDomain: \"freewrite-40098.firebaseapp.com\",\n        databaseURL: \"https://freewrite-40098.firebaseio.com\",\n        projectId: \"freewrite-40098\",\n        storageBucket: \"freewrite-40098.appspot.com\",\n        messagingSenderId: \"228525122017\",\n        appId: \"1:228525122017:web:36026015fcba76da6232a0\",\n        measurementId: \"G-VYG3XJZB2F\"\n    };\n    if (!firebase.apps.length) {\n        firebase.initializeApp(firebaseConfig);\n    }\n    const firestore = firebase.firestore()\n    const collRef = firestore.collection(\"pages\");\n\n    const clickHandler = () => {\n        let vals = document.querySelector(\"textarea\").value\n        let loc = location.pathname.slice(1);\n\n        collRef.doc(loc).set({\n            pageContent: vals\n        })\n        .then(() => {\n            console.log(\"Data submitted!\")\n        })\n        .catch(e => {\n            console.log(e)\n        })\n    }\n\n    function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n            var context = this, args = arguments;\n            var later = function() {\n                timeout = null;\n                if (!immediate) func.apply(context, args);\n            };\n            var callNow = immediate && !timeout;\n            clearTimeout(timeout);\n            timeout = setTimeout(later, wait);\n            if (callNow) func.apply(context, args);\n        };\n    };\n\n    const debouncer = async () => {\n        await debounce(clickHandler, 1000);\n    }\n    const onFieldChange = async () => {\n        await debouncer();\n    }\n\n    useEffect(async () => {\n        let loc = location.pathname.slice(1);\n        console.log(\"loc\", loc)\n        console.log(collRef.doc(loc))\n\n        try {\n            const collection = collRef.doc(loc)\n            const firestoreData = await collection.get();\n            document.querySelector(\"textarea\").value = firestoreData.data().pageContent;\n        } catch(err) {\n            throw new Error(err);\n        }\n    }, [])\n      \n    return (\n        <div>\n            <h2 className=\"pt-4\">Welcome to {location.pathname}!</h2>\n            <p className=\"mb-3\">Your notes will automatically save as your type</p>\n            <textarea onChange={onFieldChange} className=\"border\"></textarea>\n            {/* <Button onClick={clickHandler}>SUBMIT</Button> */}\n        </div>\n    )\n}\n\nexport default Page\n"]},"metadata":{},"sourceType":"module"}